# Phase 1 핵심 기능 결정 사항

## 📅 작성 정보
- **작성일**: 2025-10-25
- **참여자**: 히포
- **목적**: Phase 1 MVP 개발을 위한 핵심 기능 및 기술 스택 확정

---

## 🎯 결정 사항 요약

| 항목 | 결정 내용 |
|------|----------|
| **인증 시스템** | ID/PW + GitHub OAuth 둘 다 구현 |
| **권한 관리** | DB role 필드 (admin/user) |
| **공개/비공개** | isPublic 필드 (노션 스타일) |
| **자동저장** | 구현 (debounce 적용) |
| **글 목록** | 페이지네이션 |
| **에디터** | Tiptap (노션 스타일 실시간 렌더링) |

---

## 📋 상세 결정 내용

### 1. 인증 시스템

#### 결정
- **ID/PW 로그인** + **GitHub OAuth 로그인** 둘 다 구현
- DB에 `role` 필드 추가 (`admin` / `user`)

#### 배경
초기 설계에서는 관리자(ID/PW)와 외부인(GitHub OAuth)을 분리했으나, 두 가지 인증 방식을 모두 구현하여 학습 목표를 달성하기로 결정.

#### 이유
- **학습 목표**: 전통적인 인증(ID/PW + JWT)과 OAuth 2.0을 모두 경험
- **유연성**: 두 가지 방식으로 로그인 가능
- **확장성**: role 기반 권한 관리로 향후 권한 추가 용이

#### 구현 방향
```typescript
// User 테이블
{
  id: string
  email: string
  password?: string        // ID/PW 로그인 시에만 존재
  githubId?: string        // OAuth 로그인 시에만 존재
  role: 'admin' | 'user'
  // ...
}
```

---

### 2. 글 공개/비공개 시스템

#### 결정
- `isPublic` 필드로 공개/비공개 관리
- **Draft 개념 제거**, 노션 스타일로 심플하게

#### 배경
초기에는 블로그 플랫폼(velog, Medium)처럼 Draft → Published 상태 전환을 고려했으나, 노션 방식이 더 직관적이라고 판단.

#### 이유
- **단순함**: 상태 전환 없이 토글만으로 공개/비공개 관리
- **유연성**: 언제든 공개 ↔ 비공개 전환 가능
- **사용 시나리오**:
  - 공개 글: 기술 포스트, 프로젝트 기록
  - 비공개 글: 개인 일기, 사적인 메모

#### 구현 방향
```typescript
// Post 테이블
{
  id: string
  title: string
  content: string
  isPublic: boolean  // true: 공개, false: 비공개
  // ...
}

// 조회 로직
- 일반 사용자: isPublic=true 글만 조회
- 관리자: 모든 글 조회 가능
```

---

### 3. 자동저장 기능

#### 결정
- 자동저장 기능 구현
- 구체적인 구현 방식(debounce 주기, 전체 저장 vs diff)은 구현 시 결정

#### 배경
노션처럼 타이핑 중 자동으로 저장되는 UX 제공.

#### 이유
- **안정성**: 브라우저 종료, 네트워크 끊김 등의 상황 대비
- **UX**: 저장 버튼을 누르는 번거로움 제거
- **학습**: debounce, API 최적화 등 학습 기회

#### 고려 사항 (구현 시 결정)
- Debounce 주기: 1~2초 vs 3~5초
- 저장 방식: 전체 내용 vs 변경 사항만
- 성능: 혼자 사용하는 블로그이므로 큰 부담은 없을 것으로 예상

---

### 4. 글 목록 표시 방식

#### 결정
- **페이지네이션** 방식 채택

#### 배경
페이지네이션 vs 무한 스크롤을 비교 검토.

#### 이유
- **SEO 친화적**: 각 페이지가 고유 URL을 가짐
- **PC 사용 환경**: PC에서는 페이지네이션이 더 자연스러움
- **구현 복잡도**: 상대적으로 간단
- **사용자 경험**: 위치 파악 용이, Footer 접근 쉬움

#### 비교 분석
| 항목 | 페이지네이션 | 무한 스크롤 |
|------|-------------|------------|
| SEO | ✅ 유리 | ❌ 불리 |
| PC UX | ✅ 자연스러움 | 🤔 모바일에 더 적합 |
| 구현 | ✅ 간단 | 복잡함 |
| 확장성 | ✅ 나중에 변경 가능 | ✅ 나중에 변경 가능 |

---

### 5. 마크다운 에디터

#### 결정
- **Tiptap** 사용

#### 배경
노션/옵시디언 스타일의 실시간 렌더링 에디터 구현 목표.

#### 이유
- **노션 스타일**: 블록 기반, 실시간 렌더링 지원
- **학습 가치**: ProseMirror 기반의 현대적인 에디터 경험
- **확장성**: 플러그인 생태계 풍부
- **커뮤니티**: 활발한 커뮤니티, 좋은 문서

#### 비교 검토
| 라이브러리 | 특징 | 선택 여부 |
|-----------|------|----------|
| **Tiptap** | ProseMirror 기반, 노션 스타일 최적화 | ✅ 선택 |
| Slate | 완전 커스터마이징, 학습 곡선 높음 | ❌ 과도하게 복잡 |
| Lexical | Meta 제작, 최신 기술 | ❌ 생태계 부족 |
| Novel | Tiptap 기반, 즉시 사용 가능 | ❌ 커스터마이징 제한 |

#### 구현 계획
- Tiptap React 라이브러리 사용
- 기본 마크다운 문법 지원 (Heading, Bold, Italic, Code Block 등)
- 코드 하이라이팅 플러그인 추가
- 향후 이미지 업로드, "/" 명령어 등 확장 가능

---

## 🔄 이전 설계와의 변경점

### DESIGN.md와의 차이점

1. **인증 시스템**
   - 이전: 관리자(ID/PW), 외부인(OAuth) 분리
   - 변경: 둘 다 구현, role로 구분

2. **공개/비공개**
   - 이전: Draft 개념 모호
   - 변경: isPublic 필드로 명확화, Draft 제거

3. **에디터**
   - 이전: 여러 옵션 중 미확정
   - 변경: Tiptap으로 확정

---

## 📝 미결정 사항

### Phase 1 내 미결정 사항
- [ ] 자동저장 debounce 주기 (구현 시 결정)
- [ ] 페이지네이션 페이지당 글 개수 (10개? 20개?)
- [ ] JWT 토큰 저장 위치 (localStorage vs httpOnly cookie)
- [ ] 관리자 계정 생성 방식 (회원가입 기능 vs Seed 스크립트)

### Phase 2 이후로 미룬 사항
- [ ] 대댓글 기능
- [ ] 댓글 좋아요
- [ ] 이미지 업로드
- [ ] 태그 시스템
- [ ] 검색 기능

---

## 🎯 다음 단계

Phase 1 미결정 사항 확정 완료! 다음 설계 단계:

1. ✅ Phase 1 미결정 사항 확정
2. 🔜 **데이터베이스 스키마 설계**
3. ⏳ API 엔드포인트 설계
4. ⏳ 프론트엔드 페이지/컴포넌트 구조
5. ⏳ 인증/권한 전략 상세 설계

---

**최종 수정**: 2025-10-25
